---
import SearchBtn from '@components/SearchBtn';
import clsx from 'clsx';
import { listSubDirectories } from '@utils/paths';

const ROOT = 'all';

let categories = await listSubDirectories({
  path: './src/content/blog',
});

categories.push(ROOT);
categories.sort();

const { title, indexName, category } = Astro.props;
---

<div
  class="mx-64 flex items-center justify-between pt-32 font-plex-sans text-32 font-bold"
>
  <div class="align-center flex gap-40">
    <h1>{title}</h1>
    <div class="align-center flex gap-10">
      {
        categories.map((catName) => (
          <a
            class={clsx(
              'block self-center rounded-8 bg-ui-fleek-black px-16 py-8 font-plex-sans text-16 font-light capitalize transition duration-200 ease-in-out hover:bg-ui-mid-grey hover:text-ui-fleek-black',
              (catName === category || (catName == ROOT && !category)) &&
                'bg-ui-mid-grey text-ui-fleek-black',
            )}
            href={`/blog/${catName !== ROOT ? catName : ''}`}
          >
            {catName}
          </a>
        ))
      }
    </div>
  </div>
  <div class="relative flex h-48 items-center">
    <SearchBtn client:load indexName={indexName} />
  </div>
</div>
