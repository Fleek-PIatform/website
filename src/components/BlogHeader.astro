---
import SearchBtn from '@components/SearchBtn';
import clsx from 'clsx';
import { listSubDirectories } from '@utils/paths';

const ROOT = 'all';

let categories = await listSubDirectories({
  path: './src/content/blog',
});

categories.push(ROOT);
categories.sort();

const { title, indexName, category } = Astro.props;
---

<div
  class="mx-64 flex items-center justify-between pt-32 font-plex-sans text-32 font-bold"
>
  <div class="flex gap-40 align-center">
    <h1>{title}</h1>
    <div class="flex align-center gap-10">
    {
      categories.map(catName => (
          <a
            class={
              clsx(
                'block self-center bg-ui-fleek-black text-16 font-plex-sans font-light rounded-8 px-16 py-8 capitalize transition duration-200 ease-in-out hover:bg-ui-mid-grey hover:text-ui-fleek-black',
                (catName === category || catName == ROOT && !category) && 'bg-ui-mid-grey text-ui-fleek-black'
              )
            }
            href={`/blog/${catName !== ROOT ? catName : ''}`}
          >{catName}</a>
      ))
    }
    </div>
  </div>
  <div class="relative flex h-48 items-center">
    <SearchBtn client:load indexName={indexName} />
  </div>
</div>
