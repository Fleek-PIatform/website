---
import '../globals.css';
import Announcement from "@components/Announcement";
import Container from "@components/Container";
import Nav from "@components/Nav";
import Footer from "@components/Footer";
import generateSidebarDS, { generateSidebarDSByUserOrder } from '@utils/generateSidebarDS';
import { getCollection } from "astro:content";
import Sidebar from '@components/Sidebar';

interface Props {
	title: string;
}

const { title } = Astro.props;

const allPosts = await getCollection("docs");
const orderBy = [{
	category: 'randomx',
	order: 5,
}, {
	category: 'categoryx',
	order: 3,
}, {
	category: 'has_whitespace_and-dash',
	order: 2,
}];

const sidebarSorted = generateSidebarDSByUserOrder(allPosts, orderBy);
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Seamlessly build Web3 apps and services that are edge-optimized for performance. Decentralized hosting, storage, gateways and more." />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
	</head>
  <body
    class="--font-plex-sans --font-plex-mono --font-sans bg-mesh bg-black font-sans text-ui-light-grey selection:bg-[#ff3dcf] selection:text-black"
  >
		<Nav client:load pathname={Astro.url.pathname} />
  	<main class="container flex min-h-container">
				<div class="px-32">
      		<Sidebar
      			client:load
      			data={sidebarSorted}
            pathname={Astro.url.pathname}
      		/>
				</div>
    	  <div class="px-64">
					<slot />
				</div>
    </main>
    </Container>
    <Footer client:load />
	</body>
</html>
